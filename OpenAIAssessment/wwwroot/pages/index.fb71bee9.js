import{a as E,b as K,e as X,f as Y,h as Q,u as W,g as Z}from"./index.bfe2db98.js";var j={exports:{}};const V=E(K),ee=E(X),re=E(Y),te=E(Q),ne=E(W);(function(N){(function(A){"use strict";function S(l){return l&&l.__esModule&&l.default?l.default:l}if(N.exports)N.exports=A(S(V),ee.Deferred,re.extend,S(te),S(ne));else throw"This script should be used with an AMD or CommonJS loader"})(function(A,S,l,T,q){"use strict";var I=["onLoading","onLoaded","onInserting","onInserted","onUpdating","onUpdated","onRemoving","onRemoved","onModifying","onModified","onPush","loadMode","cacheRawData","errorHandler"];function L(e){var t=e.key,i=e.loadUrl,f=e.loadMethod||"GET",y=e.loadParams,v=e.loadMode==="raw",x=e.updateUrl,s=e.insertUrl,M=e.deleteUrl,w=e.onBeforeSend,D=e.onAjaxError;function p(r,u,n,o){var a=S(),c,d;function g(){A.sendRequest(n).then(function(m,b,h){o?o(a,m,h):a.resolve()},function(m,b){var h=B(m);if(D){var P={xhr:m,error:h};D(P),h=P.error}h?a.reject(h):a.reject(m,b)})}return u&&!t?a.reject(new Error("Primary key is not specified (operation: '"+r+"', url: '"+n.url+"')")):(r==="load"?(n.cache=!1,n.dataType="json"):n.dataType="text",w&&(d=w(r,n),d&&typeof d.then=="function"&&(c=d)),c?c.then(g,function(m){a.reject(m)}):g()),a.promise()}function H(r){return Array.isArray(t)?t.map(function(u){return[u,r[u]]}):[t,r]}function O(r,u){var n={};if(u&&(n.isCountQuery=u),r){["skip","take","requireTotalCount","requireGroupCount"].forEach(function(g){r[g]!==void 0&&(n[g]=r[g])});var o=q.normalizeSortingInfo,a=r.group,c=r.filter,d=r.select;r.sort&&(n.sort=JSON.stringify(o(r.sort))),a&&(z(a)||(a=o(a)),n.group=JSON.stringify(a)),Array.isArray(c)&&(c=l(!0,[],c),U(c),n.filter=JSON.stringify(c)),r.totalSummary&&(n.totalSummary=JSON.stringify(r.totalSummary)),r.groupSummary&&(n.groupSummary=JSON.stringify(r.groupSummary)),d&&(Array.isArray(d)||(d=[d]),n.select=JSON.stringify(d))}return l(n,y),n}function R(r,u,n){var o=n.getResponseHeader("Content-Type"),a=o&&o.indexOf("application/json")>-1;r.resolve(a?JSON.parse(u):u)}var $={key:t,useDefaultSearch:!0,load:function(r){return p("load",!1,{url:i,method:f,data:O(r)},function(u,n){C(u,n,function(o){return[o.data,k(o)]})})},totalCount:!v&&function(r){return p("load",!1,{url:i,method:f,data:O(r,!0)},function(u,n){C(u,n,function(o){return[o.totalCount]})})},byKey:!v&&function(r){return p("load",!0,{url:i,method:f,data:O({filter:H(r)})},function(u,n){C(u,n,function(o){return[o.data[0]]})})},update:x&&function(r,u){return p("update",!0,{url:x,method:e.updateMethod||"PUT",data:{key:J(r),values:JSON.stringify(u)}},R)},insert:s&&function(r){return p("insert",!0,{url:s,method:e.insertMethod||"POST",data:{values:JSON.stringify(r)}},R)},remove:M&&function(r){return p("delete",!0,{url:M,method:e.deleteMethod||"DELETE",data:{key:J(r)}})}};return I.forEach(function(r){var u=e[r];u!==void 0&&($[r]=u)}),$}function C(e,t,i){t=_(t),!t||typeof t!="object"?e.reject(new Error("Unexpected response received")):e.resolve.apply(e,i(t))}function _(e){return Array.isArray(e)?{data:e}:typeof e=="number"?{totalCount:e}:e}function k(e){return{totalCount:"totalCount"in e?e.totalCount:-1,groupCount:"groupCount"in e?e.groupCount:-1,summary:e.summary||null}}function J(e){return typeof e=="object"?JSON.stringify(e):e}function F(e){function t(s,M){for(s=String(s);s.length<M;)s="0"+s;return s}var i=[1+e.getMonth(),"/",e.getDate(),"/",e.getFullYear()],f=e.getHours(),y=e.getMinutes(),v=e.getSeconds(),x=e.getMilliseconds();return f+y+v+x>0&&i.push(" ",t(f,2),":",t(y,2),":",t(v,2),".",t(x,3)),i.join("")}function U(e){e.forEach(function(t,i){Array.isArray(t)?U(t):Object.prototype.toString.call(t)==="[object Date]"&&(e[i]=F(t))})}function z(e){if(!Array.isArray(e))return!1;for(var t=0;t<e.length;t++)if("groupInterval"in e[t]||"isExpanded"in e[t])return!0;return!1}function B(e){var t=e.getResponseHeader("Content-Type"),i=e.responseText;if(!t)return null;if(t.indexOf("text/plain")===0)return i;if(t.indexOf("application/json")===0){var f=G(i);if(typeof f=="string")return f;if(typeof f=="object"){for(var y in f)if(typeof f[y]=="string")return f[y]}return i}return null}function G(e){try{return JSON.parse(e)}catch{return null}}return{createStore:function(e){return new T(L(e))}}})})(j);const oe=Z(j.exports);export{j as d};
