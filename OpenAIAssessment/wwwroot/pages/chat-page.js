import{d as ee,r as w,o as q,c as G,a as J,b as $,F as te,e as re,f as ne,_ as ae,g as oe,h as se}from"./_plugin-vue_export-helper.34eb5909.js";import{w as ie}from"./index.6cce1733.js";import{g as T,a as ue,d as de,e as fe,c as le,u as ce,b as me,f as V}from"./index.573f11c0.js";import{S as pe}from"./SidebarHistory.3f5fca20.js";import{C as ge}from"./ChatItem.176163f8.js";import"./HistoryItem.d9ef6caa.js";var H={exports:{}};const he=T(ue),ye=T(de),Me=T(fe),Se=T(le),xe=T(ce);(function(d){(function(f){"use strict";function y(l){return l&&l.__esModule&&l.default?l.default:l}if(d.exports)d.exports=f(y(he),ye.Deferred,Me.extend,y(Se),y(xe));else throw"This script should be used with an AMD or CommonJS loader"})(function(f,y,l,O,D){"use strict";var b=["onLoading","onLoaded","onInserting","onInserted","onUpdating","onUpdated","onRemoving","onRemoved","onModifying","onModified","onPush","loadMode","cacheRawData","errorHandler"];function I(e){var r=e.key,i=e.loadUrl,u=e.loadMethod||"GET",g=e.loadParams,v=e.loadMode==="raw",_=e.updateUrl,m=e.insertUrl,E=e.deleteUrl,B=e.onBeforeSend,R=e.onAjaxError;function S(t,a,n,o){var s=y(),p,c;function x(){f.sendRequest(n).then(function(h,j,A){o?o(s,h,A):s.resolve()},function(h,j){var A=Y(h);if(R){var z={xhr:h,error:A};R(z),A=z.error}A?s.reject(A):s.reject(h,j)})}return a&&!r?s.reject(new Error("Primary key is not specified (operation: '"+t+"', url: '"+n.url+"')")):(t==="load"?(n.cache=!1,n.dataType="json"):n.dataType="text",B&&(c=B(t,n),c&&typeof c.then=="function"&&(p=c)),p?p.then(x,function(h){s.reject(h)}):x()),s.promise()}function Z(t){return Array.isArray(r)?r.map(function(a){return[a,t[a]]}):[r,t]}function U(t,a){var n={};if(a&&(n.isCountQuery=a),t){["skip","take","requireTotalCount","requireGroupCount"].forEach(function(x){t[x]!==void 0&&(n[x]=t[x])});var o=D.normalizeSortingInfo,s=t.group,p=t.filter,c=t.select;t.sort&&(n.sort=JSON.stringify(o(t.sort))),s&&(X(s)||(s=o(s)),n.group=JSON.stringify(s)),Array.isArray(p)&&(p=l(!0,[],p),k(p),n.filter=JSON.stringify(p)),t.totalSummary&&(n.totalSummary=JSON.stringify(t.totalSummary)),t.groupSummary&&(n.groupSummary=JSON.stringify(t.groupSummary)),c&&(Array.isArray(c)||(c=[c]),n.select=JSON.stringify(c))}return l(n,g),n}function F(t,a,n){var o=n.getResponseHeader("Content-Type"),s=o&&o.indexOf("application/json")>-1;t.resolve(s?JSON.parse(a):a)}var L={key:r,useDefaultSearch:!0,load:function(t){return S("load",!1,{url:i,method:u,data:U(t)},function(a,n){C(a,n,function(o){return[o.data,M(o)]})})},totalCount:!v&&function(t){return S("load",!1,{url:i,method:u,data:U(t,!0)},function(a,n){C(a,n,function(o){return[o.totalCount]})})},byKey:!v&&function(t){return S("load",!0,{url:i,method:u,data:U({filter:Z(t)})},function(a,n){C(a,n,function(o){return[o.data[0]]})})},update:_&&function(t,a){return S("update",!0,{url:_,method:e.updateMethod||"PUT",data:{key:P(t),values:JSON.stringify(a)}},F)},insert:m&&function(t){return S("insert",!0,{url:m,method:e.insertMethod||"POST",data:{values:JSON.stringify(t)}},F)},remove:E&&function(t){return S("delete",!0,{url:E,method:e.deleteMethod||"DELETE",data:{key:P(t)}})}};return b.forEach(function(t){var a=e[t];a!==void 0&&(L[t]=a)}),L}function C(e,r,i){r=N(r),!r||typeof r!="object"?e.reject(new Error("Unexpected response received")):e.resolve.apply(e,i(r))}function N(e){return Array.isArray(e)?{data:e}:typeof e=="number"?{totalCount:e}:e}function M(e){return{totalCount:"totalCount"in e?e.totalCount:-1,groupCount:"groupCount"in e?e.groupCount:-1,summary:e.summary||null}}function P(e){return typeof e=="object"?JSON.stringify(e):e}function W(e){function r(m,E){for(m=String(m);m.length<E;)m="0"+m;return m}var i=[1+e.getMonth(),"/",e.getDate(),"/",e.getFullYear()],u=e.getHours(),g=e.getMinutes(),v=e.getSeconds(),_=e.getMilliseconds();return u+g+v+_>0&&i.push(" ",r(u,2),":",r(g,2),":",r(v,2),".",r(_,3)),i.join("")}function k(e){e.forEach(function(r,i){Array.isArray(r)?k(r):Object.prototype.toString.call(r)==="[object Date]"&&(e[i]=W(r))})}function X(e){if(!Array.isArray(e))return!1;for(var r=0;r<e.length;r++)if("groupInterval"in e[r]||"isExpanded"in e[r])return!0;return!1}function Y(e){var r=e.getResponseHeader("Content-Type"),i=e.responseText;if(!r)return null;if(r.indexOf("text/plain")===0)return i;if(r.indexOf("application/json")===0){var u=Q(i);if(typeof u=="string")return u;if(typeof u=="object"){for(var g in u)if(typeof u[g]=="string")return u[g]}return i}return null}function Q(e){try{return JSON.parse(e)}catch{return null}}return{createStore:function(e){return new O(I(e))}}})})(H);const Je=me(H.exports),K="/ChatWebAPI/",Ae=H.exports.createStore({key:"message",loadUrl:K+"Get/",insertUrl:K+"Post/",insertMethod:"POST",loadMethod:"GET",onBeforeSend:function(d,f){f.xhrFields={withCredentials:!0}}}),Ce=ee({name:"chat-page",props:{},components:{SidebarHistory:pe,ChatItem:ge,DxButton:V.DxButton,DxTextArea:V.DxTextArea},data(){return{message:"",textAreaMaxHeight:"100%",chatItems:[{message:"Hello",isMine:!0},{message:"Hi",isMine:!1},{message:"How are you?",isMine:!0},{message:"Fine, thanks",isMine:!1},{message:"And you?",isMine:!1},{message:"I'm fine too",isMine:!0},{message:"What are you doing?",isMine:!0},{message:"Hello",isMine:!0},{message:"Hi",isMine:!1},{message:"How are you?",isMine:!0},{message:"Fine, thanks",isMine:!1},{message:"And you?",isMine:!1},{message:"I'm fine too",isMine:!0},{message:"What are you doing?",isMine:!0}]}},methods:{sendMessage(){let d=document.querySelector(".dx-texteditor-input");this.message=d.value,Ae.insert({message:this.message}).then(f=>{console.log(f),this.chatItems.push({message:this.message,isMine:!0})})},onTextAreaValueChanged(d){}}}),ve={class:"chat"},_e={class:"chat-body"},Te={class:"chat-bodyMain"},Ee={class:"chat-bodyFooter"};function we(d,f,y,l,O,D){const b=w("SidebarHistory"),I=w("ChatItem"),C=w("DxTextArea"),N=w("DxButton");return q(),G("div",ve,[J(b),$("main",_e,[$("div",Te,[(q(!0),G(te,null,re(d.chatItems,M=>(q(),ne(I,{message:M.message,isMine:M.isMine},null,8,["message","isMine"]))),256))]),$("footer",Ee,[J(C,{"max-hight":300,"auto-resize-enabled":!0,width:"100%",onChange:f[0]||(f[0]=M=>d.onTextAreaValueChanged(M)),placeholder:"Type a message..."}),J(N,{text:"Send","styling-mode":"contained",type:"default",onClick:d.sendMessage},null,8,["onClick"])])])])}const Oe=ae(Ce,[["render",we],["__file","C:/Users/nduduzos/source/repos/OpenAIAssessment/OpenAIAssessment/Client/src/pages/chat-page.vue"]]);window.customElements.define("chat-page",ie(Oe,oe,se));
