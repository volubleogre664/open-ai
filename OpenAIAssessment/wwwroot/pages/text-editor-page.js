import{d as g,r as d,o as T,c as I,a as i,b as n,w as p,_ as C,g as w,h as H}from"./_plugin-vue_export-helper.34eb5909.js";import{w as f}from"./index.832b91df.js";import{S as k}from"./SidebarHistory.3ecd085c.js";import{d as c}from"./index.bfe2db98.js";import{d as m}from"./index.fb71bee9.js";import"./HistoryItem.18a3e533.js";const x="/TextEditorWebAPI/",_="/HistoryWebAPI/",S=m.exports.createStore({key:"TextId",loadUrl:x+"Get/",insertUrl:x+"Post/",loadMethod:"GET",insertMethod:"POST"}),E=m.exports.createStore({key:"HistoryId",loadUrl:_+"Get/",loadMethod:"GET",loadParams:{page:"texteditor"},onBeforeSend:function(t,s){s.xhrFields={withCredentials:!0}}}),v=g({name:"text-editor-page",props:{},components:{SidebarHistory:k,DxTextArea:c.DxTextArea,DxButton:c.DxButton,DxScrollView:c.DxScrollView},data(){return{history:[],currentEditor:{HistoryId:0,Content:"",Click:()=>{}},text:{TextId:0,OldText:"",NewText:"",HistoryId:0}}},mounted(){this.getHistory()},methods:{sendMessage(t){var s=document.querySelector("textarea:first-of-type"),e=s.value;S.insert({instruction:t,message:e}).then(r=>{console.log("Text",r);let o={TextId:r[0].TextId,OldText:"",NewText:"",HistoryId:r[0].HistoryId};r.forEach(l=>(l.IsBot?o.NewText=l.Text:o.OldText=l.Text,o)),this.history.push({HistoryId:o.HistoryId,Content:o.OldText,Click:()=>{this.getEditsForHistory(o.HistoryId),this.currentEditor={HistoryId:o.HistoryId,Content:o.OldText,Click:()=>{}}}}),this.text=o})},getSpellingClick(){this.sendMessage("Fix the Spelling")},getGrammarClick(){this.sendMessage("Fix the Grammar")},getSpellingAndGrammarClick(){this.sendMessage("Fix the Spelling and Grammar")},newEditClick(){this.currentEditor={HistoryId:0,Content:"",Click:()=>{}},this.text={TextId:0,OldText:"",NewText:"",HistoryId:0}},getEditsForHistory(t){var s=x+"Get/?historyId="+t;fetch(s).then(e=>e.json()).then(({data:e})=>{console.log("Text",e);let r={TextId:e[0].TextId,OldText:"",NewText:"",HistoryId:e[0].HistoryId};e.forEach(o=>(o.IsBot?r.NewText=o.Text:r.OldText=o.Text,r)),this.text=r})},getHistory(){E.load().then(t=>{console.log("History: ",t);let s=t.map(e=>({HistoryId:e.HistoryId,Content:e.Content,Click:()=>{this.getEditsForHistory(e.HistoryId),this.currentEditor={HistoryId:e.HistoryId,Content:e.Content,Click:()=>{}}}}));this.history=s})}}}),A={class:"textEditor"},D={class:"textEditor-body"},G={class:"textEditor-bodyMain"},O={class:"text-container old-text"},F={class:"text-container new-text"},b={class:"textEditor-bodyFooter"};function B(t,s,e,r,o,l){const u=d("SidebarHistory"),h=d("DxTextArea"),y=d("DxScrollView"),a=d("DxButton");return T(),I("div",A,[i(u,{"history-items":t.history,"new-chat-click":t.newEditClick},null,8,["history-items","new-chat-click"]),n("main",D,[n("section",G,[n("div",O,[i(y,{width:"100%",height:"100%"},{default:p(()=>[i(h,{width:"100%",height:"100%",value:t.text.OldText,placeholder:"Type your text here..."},null,8,["value"])]),_:1})]),n("div",F,[i(y,{width:"100%",height:"100%"},{default:p(()=>[i(h,{"max-hight":"100%","auto-resize-enabled":!0,width:"100%","read-only":!0,value:t.text.NewText,placeholder:"Edited text will show here..."},null,8,["value"])]),_:1})])]),n("footer",b,[i(a,{text:"Fix Spelling","styling-mode":"contained",type:"default",width:"70%",onClick:t.getSpellingClick},null,8,["onClick"]),i(a,{text:"Fix Grammar","styling-mode":"contained",type:"default",width:"70%",onClick:t.getGrammarClick},null,8,["onClick"]),i(a,{text:"Fix Spelling and Grammar","styling-mode":"contained",type:"default",width:"70%",onClick:t.getSpellingAndGrammarClick},null,8,["onClick"])])])])}const N=C(v,[["render",B],["__file","C:/Users/nduduzos/source/repos/OpenAIAssessment/OpenAIAssessment/Client/src/pages/text-editor-page.vue"]]);window.customElements.define("text-editor-page",f(N,w,H));
